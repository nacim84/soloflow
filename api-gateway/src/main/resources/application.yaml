claudeserver:
  port: 8080
  tomcat:
    threads:
      max: 200
    connection-timeout: 20000ms

spring:
  application:
    name: api-gateway

  datasource:
    # url: jdbc:postgresql://localhost:5434/soloflow_db
    url: jdbc:postgresql://aws-1-eu-north-1.pooler.supabase.com:6543/postgres
    username: postgres.xylsbcbteqenehvggrss
    password: cU9DKR*/jKEVyf3
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  cloud:
    gateway:
      mvc:
        routes:
          # API Template Service (Timesheet & Mileage)
          - id: api-template
            uri: http://localhost:8081
            predicates:
              - Path=/api/v1/template/**
          # API PDF Service
          - id: api-pdf
            uri: http://localhost:8082
            predicates:
              - Path=/api/v1/pdf/**
          # API Docling Service
          - id: api-docling
            uri: http://localhost:8083
            predicates:
              - Path=/api/v1/docling/**
        default-filters:
          - name: RequestRateLimiter
            args:
              redis-rate-limiter.replenishRate: 100
              redis-rate-limiter.burstCapacity: 200
              key-resolver: "#{@userKeyResolver}"

  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=1h

management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
    info:
      enabled: true

# Configuration Custom
api:
  key:
    pepper: dev-pepper-change-in-production
